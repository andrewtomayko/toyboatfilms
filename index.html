<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toy Boat — Video Portfolio</title>

  <!-- GLightbox -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />

  <!-- Netlify Identity -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <style>
    :root{
      --bg:#fff;
      --text:#000;
      --muted:#777;
      --border:#eee;
      --columns:2;
      --gap:32px;
      --sidePadding:32px;
      --introWidth:720px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* ---------- HEADER ---------- */
    .site-header{
      position:sticky;
      top:0;
      z-index:1000;
      background:var(--bg);
      border-bottom:1px solid var(--border);
    }

    .header-inner{
      padding:24px var(--sidePadding);
      font-weight:600;
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    /* ---------- INTRO ---------- */
    .intro{
      max-width:var(--introWidth);
      padding:120px var(--sidePadding) 80px;
    }

    .intro h1{
      font-size:38px;
      margin:0 0 24px;
    }

    .intro p{
      font-size:18px;
      line-height:1.6;
      margin:0 0 16px;
    }

    .location{
      font-size:14px;
      color:var(--muted);
      margin-bottom:32px;
    }

    .cta{
      background:none;
      border:2px solid var(--text);
      padding:14px 24px;
      font-size:13px;
      letter-spacing:.1em;
      cursor:pointer;
      text-transform:uppercase;
    }

    /* ---------- GRID ---------- */
    main{
      padding:0 var(--sidePadding) 80px;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(var(--columns),1fr);
      gap:var(--gap);
    }

    @media (max-width:800px){
      .grid{ grid-template-columns:1fr; }
      .intro{ padding-top:72px; }
    }

    .card{
      position:relative;
      text-decoration:none;
      color:inherit;
      overflow:hidden;
    }

    .thumb{
      width:100%;
      aspect-ratio:16/9;
      object-fit:cover;
      display:block;
      background:#222;
    }

    .play{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      pointer-events:none;
    }

    .play span{
      font-size:56px;
      color:#fff;
      text-shadow:0 10px 25px rgba(0,0,0,.6);
    }

    /* ---------- CONTACT MODAL ---------- */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.6);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:2000;
    }

    .modal-content{
      background:#fff;
      padding:42px;
      width:90%;
      max-width:640px;
      position:relative;
    }

    .modal-content input,
    .modal-content textarea{
      width:100%;
      margin-bottom:14px;
      padding:12px;
      border:1px solid var(--border);
      font-size:14px;
    }

    .modal-content textarea{ min-height:120px; }

    .modal-content button{
      border:2px solid var(--text);
      background:none;
      padding:12px 18px;
      font-size:13px;
      letter-spacing:.1em;
      cursor:pointer;
      text-transform:uppercase;
    }

    .close{
      position:absolute;
      top:10px;
      right:12px;
      font-size:28px;
      background:none;
      border:none;
      cursor:pointer;
    }

    /* ---------- GLIGHTBOX FULLSCREEN FIX ---------- */
    .glightbox-container,
    .glightbox-container .gcontainer,
    .glightbox-container .ginner-container,
    .glightbox-container .gslide,
    .glightbox-container .gslide-inner-content,
    .glightbox-container .gvideo-container{
      width:100vw !important;
      height:100vh !important;
      max-width:100vw !important;
      max-height:100vh !important;
    }

    .glightbox-container .gcontainer{
      padding:0 !important;
    }

    .glightbox-container .gvideo iframe,
    .glightbox-container .gvideo video{
      width:100% !important;
      height:100% !important;
    }
  </style>
</head>

<body>

<header class="site-header">
  <div class="header-inner" id="logo">TOY BOAT</div>
</header>

<section class="intro">
  <h1 id="headline">Videos that connect</h1>
  <p id="description">We are a small team of local filmmakers creating thoughtful, story-driven videos.</p>
  <p class="location" id="location">Based in Poulsbo, serving the Puget Sound</p>
  <button class="cta" id="openContact">PLAN YOUR PROJECT</button>
</section>

<main>
  <section class="grid" id="videoGrid"></section>
</main>

<div class="modal" id="contactModal">
  <div class="modal-content">
    <button class="close" id="closeContact">×</button>
    <form name="contact" method="POST" data-netlify="true">
      <input type="hidden" name="form-name" value="contact">
      <input type="text" name="name" placeholder="Name" required>
      <input type="email" name="email" placeholder="Email" required>
      <textarea name="message" placeholder="Tell us about your project" required></textarea>
      <button type="submit">SUBMIT</button>
    </form>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

<script>
  async function loadJSON(path){
    const res = await fetch(path,{cache:"no-store"});
    return res.json();
  }

  function renderVideos(videos){
    const grid = document.getElementById("videoGrid");

    grid.innerHTML = videos.map(v => `
      <a class="card glightbox"
         href="${v.type === "youtube"
           ? `https://www.youtube.com/watch?v=${v.id}`
           : `https://vimeo.com/${v.id}`}"
         data-gallery="videos"
         data-type="video">
        <img class="thumb" src="${v.thumb}" alt="">
        <div class="play"><span>▶</span></div>
      </a>
    `).join("");

    GLightbox({
      selector:".glightbox",
      width:"100vw",
      height:"100vh",
      zoomable:false
    });
  }

  (async()=>{
    try{
      const site = await loadJSON("/data/site.json");
      if(site.logo) document.getElementById("logo").textContent = site.logo;
      if(site.headline) document.getElementById("headline").textContent = site.headline;
      if(site.description) document.getElementById("description").textContent = site.description;
      document.getElementById("location").textContent = site.location || "";
      if(site.cta) document.getElementById("openContact").textContent = site.cta;
    }catch{}

    const data = await loadJSON("/data/videos.json");
    renderVideos(data.videos || []);

    const modal = document.getElementById("contactModal");
    document.getElementById("openContact").onclick = () => modal.style.display="flex";
    document.getElementById("closeContact").onclick = () => modal.style.display="none";
  })();
</script>

</body>
</html>
